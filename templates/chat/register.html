{% extends 'chat/index.html' %}
{% block form %}
    <h3>
    S'inscrire
    </h3>
    <form id="register-form" class="form-group" method="POST">
        {% csrf_token %}
            <div class="row">
                <div class="input-field col s12">
                    {{ form.username }}
                    <label for="id_username" data-error="Username already taken">Pseudo</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    {{ form.password1 }}
                    <label for="id_password">Mot de passe</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    {{ form.password2 }}
                    <label for="id_password2">Confirmer le mot de passe</label>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                <div class="right">
                    <button class="btn blue waves-effect waves-light pull-s12">S'inscrire</button>
                </div>
                </div>
            </div>
    </form>
<script>
document.getElementById('register-form').addEventListener('submit', function(event) {
    var username = document.getElementById('id_username').value;
    var password = document.getElementById('id_password1').value;
    var confirmPassword = document.getElementById('id_password2').value;

    if (password.length < 8) {
        event.preventDefault(); // Empêche la soumission du formulaire
        alert('Le mot de passe doit contenir au moins 8 caractères.');
    } else if (password.includes(username)) {
        event.preventDefault(); // Empêche la soumission du formulaire
        alert('Le mot de passe ne doit pas être trop similaire au nom d’utilisateur.');
    } else if (password !== confirmPassword) {
        event.preventDefault(); // Empêche la soumission du formulaire
        alert('Le mot de passe et sa confirmation ne correspondent pas.');
    }
});
</script>
{% endblock %}

